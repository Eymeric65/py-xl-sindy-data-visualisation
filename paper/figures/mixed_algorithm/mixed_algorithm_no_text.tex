\documentclass[tikz,border=5mm]{standalone}
\usepackage{tikz}
\usepackage{etoolbox}
\usetikzlibrary{positioning,matrix,backgrounds,calc,fit}


\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

\definecolor{sindynullgray}{RGB}{200,200,200}
\definecolor{sindypreknowledge}{RGB}{196,78,82}
\definecolor{sindystandard}{RGB}{85,168,104}
\definecolor{sindysolutionexplicit}{RGB}{129,114,179}
\definecolor{sindysolutionimplicit}{RGB}{204,185,116}


\newcommand{\lb}{[}
\newcommand{\rb}{]}

% Define the sindy component as a node style
\tikzset{
    sindy component/.style={
        rectangle,
        minimum width=6pt,
        minimum height=10pt,
        rounded corners=3pt,
        fill=sindynullgray,
        draw=none,
        inner sep=0pt,
        outer sep=1pt,
        align=center,
        opacity=0.3,
    },
    deactivated opacity/.style={opacity=0.3},
    full opacity/.style={opacity=1.0},
    sindy solution/.style={
        rectangle,
        minimum width=6pt,
        minimum height=6pt,
        rounded corners=3pt,
        fill=sindynullgray,
        draw=none,
        inner sep=0pt,
        outer sep=0pt,
        align=center,
        opacity=0.3,
    },
}

\begin{document}
\begin{tikzpicture}

%Create a matrix of nodes with automatic naming (m-row-column)
\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy component},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (m1) {
        |[fill=sindystandard,deactivated opacity]| & & & |[fill=sindystandard,deactivated opacity]| & & & & & |[fill=sindystandard,deactivated opacity]| \\
        |[deactivated opacity]| & |[fill=sindypreknowledge,full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[fill=sindystandard,full opacity]|& |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]|\\
        |[deactivated opacity]| & |[full opacity]| & |[fill=sindypreknowledge,full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]|\\
        |[fill=sindystandard,deactivated opacity]| & & & & & & & & |[fill=sindystandard,deactivated opacity]| \\
         & & & & & |[fill=sindystandard,deactivated opacity]| & |[fill=sindystandard,deactivated opacity]| & & \\
         & & & & & |[fill=sindystandard,deactivated opacity]| &  & |[fill=sindystandard,deactivated opacity]| & \\
    };

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy component},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (m2a) [right=1.2cm of m1] {
        |[fill=sindystandard,full opacity]| & |[full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[full opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[fill=sindystandard,full opacity]| \\
        |[full opacity]| & |[fill=sindypreknowledge,full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[fill=sindystandard,full opacity]|& |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[full opacity]|\\
        |[full opacity]| & |[full opacity]| & |[fill=sindypreknowledge,full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[full opacity]|\\
        |[fill=sindystandard,deactivated opacity]| & & & & & & & & |[fill=sindystandard,deactivated opacity]| \\
         & & & & & |[fill=sindystandard,deactivated opacity]| & |[fill=sindystandard,deactivated opacity]| & & \\
         & & & & & |[fill=sindystandard,deactivated opacity]| &  & |[fill=sindystandard,deactivated opacity]| & \\
        };

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy component},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (m2b) [right=1.2cm of m2a] {
        |[fill=sindystandard,full opacity]| & |[full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[full opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[fill=sindystandard,full opacity]| \\
        |[full opacity]| & |[fill=sindypreknowledge,full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[fill=sindystandard,full opacity]|& |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[full opacity]|\\
        |[full opacity]| & |[full opacity]| & |[fill=sindypreknowledge,full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[full opacity]|\\
        |[fill=sindystandard,full opacity]| & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[fill=sindystandard,full opacity]| \\
         & & & & & |[fill=sindystandard,deactivated opacity]| & |[fill=sindystandard,deactivated opacity]| & & \\
         & & & & & |[fill=sindystandard,deactivated opacity]| &  & |[fill=sindystandard,deactivated opacity]| & \\
        };

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy component},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (m3) [below=0.7cm of m1] {
        |[fill=sindystandard,full opacity]| & |[full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[full opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[fill=sindystandard,full opacity]| \\
        |[full opacity]| & |[fill=sindypreknowledge,full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[fill=sindysolutionexplicit,full opacity]|& |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[full opacity]|\\
        |[full opacity]| & |[full opacity]| & |[fill=sindypreknowledge,full opacity]| & |[full opacity]| & |[fill=sindysolutionexplicit,full opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[full opacity]|\\
        |[fill=sindystandard,full opacity]| & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[fill=sindystandard,full opacity]| \\
         & & & & & |[fill=sindystandard,deactivated opacity]| & |[fill=sindystandard,deactivated opacity]| & & \\
         & & & & & |[fill=sindystandard,deactivated opacity]| &  & |[fill=sindystandard,deactivated opacity]| & \\
        };

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy component},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (m4) [right=1.2cm of m3] {
        |[fill=sindystandard,full opacity]| & &  & |[fill=sindystandard,deactivated opacity]| & & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| \\
         & |[fill=sindypreknowledge,deactivated opacity]| & & |[fill=sindystandard,deactivated opacity]| & |[fill=sindysolutionexplicit,deactivated opacity]|& & & & \\
         & & |[fill=sindypreknowledge,deactivated opacity]| & & |[fill=sindysolutionexplicit,deactivated opacity]| & & & & \\
        |[fill=sindystandard,full opacity]| & & & & & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| \\
        |[full opacity]| & & & & & |[fill=sindystandard,full opacity]| & |[fill=sindystandard,full opacity]| & |[full opacity]| & |[full opacity]| \\
        |[full opacity]| & & & & & |[fill=sindystandard,full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[full opacity]| \\
        };

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy component},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (m5) [right=1.2cm of m4] {
        |[fill=sindysolutionimplicit,full opacity]| & &  & |[fill=sindystandard,deactivated opacity]| & & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[fill=sindysolutionimplicit,full opacity]| \\
         & |[fill=sindypreknowledge,deactivated opacity]| & & |[fill=sindystandard,deactivated opacity]| & |[fill=sindysolutionexplicit,deactivated opacity]|& & & & \\
         & & |[fill=sindypreknowledge,deactivated opacity]| & & |[fill=sindysolutionexplicit,deactivated opacity]| & & & & \\
        |[fill=sindysolutionimplicit,full opacity]| & & & & & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[fill=sindysolutionimplicit,full opacity]| \\
        |[full opacity]| & & & & & |[fill=sindystandard,full opacity]| & |[fill=sindystandard,full opacity]| & |[full opacity]| & |[full opacity]| \\
        |[full opacity]| & & & & & |[fill=sindystandard,full opacity]| & |[full opacity]| & |[fill=sindystandard,full opacity]| & |[full opacity]| \\
        };


\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy solution},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (sm3) [above=0.01cm of m3] {
        |[full opacity]| & |[fill=sindypreknowledge, full opacity]| & |[fill=sindypreknowledge, full opacity]| & |[full opacity]| & |[fill=sindysolutionexplicit,full opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[deactivated opacity]| & |[full opacity]| \\
        };
\node [left=0.1cm of sm3.west,anchor=east] {\tiny $S =$};

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy solution},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (sm2b) [above=0.01cm of m2b] {
         & |[fill=sindypreknowledge, full opacity]| & |[fill=sindypreknowledge, full opacity]| & & & & & & \\
        };
\node [left=0.1cm of sm2b.west,anchor=east] {\tiny $S =$};

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy solution},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (sm1) [above=0.01cm of m1] {
         & |[fill=sindypreknowledge, full opacity]| & |[fill=sindypreknowledge, full opacity]| & & & & & & \\
        };
\node [left=0.1cm of sm1.west,anchor=east] {\tiny $S =$};

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy solution},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (sm2a) [above=0.01cm of m2a] {
         & |[fill=sindypreknowledge, full opacity]| & |[fill=sindypreknowledge, full opacity]| & & & & & & \\
        };
\node [left=0.1cm of sm2a.west,anchor=east] {\tiny $S =$};

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy solution},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (sm4) [above=0.01cm of m4] {
        |[full opacity]| & |[fill=sindypreknowledge, deactivated opacity]| & |[fill=sindypreknowledge, deactivated opacity]| & |[deactivated opacity]| & |[fill=sindysolutionexplicit,deactivated opacity]| & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[full opacity]| \\
        };
\node [left=0.1cm of sm4.west,anchor=east] {\tiny $S =$};

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy solution},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (sm5) [above=0.01cm of m5] {
        |[fill=sindysolutionimplicit,full opacity]| & |[fill=sindypreknowledge, deactivated opacity]| & |[fill=sindypreknowledge, deactivated opacity]| & |[deactivated opacity]| & |[fill=sindysolutionexplicit,deactivated opacity]| & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[fill=sindysolutionimplicit,full opacity]| \\
        };
\node [left=0.1cm of sm5.west,anchor=east] {\tiny $S =$};

\node at ($(m1.west) - (0.2cm,0)$) [anchor=east] {1.};
\node at ($(m2a.west) - (0.2cm,0)$) [anchor=east] {2.a};
\node at ($(m2b.west) - (0.2cm,0)$) [anchor=east] {2.b};
\node at ($(m3.west) - (0.2cm,0)$) [anchor=east] {3.};
\node at ($(m4.west) - (0.2cm,0)$) [anchor=east] {4.};
\node at ($(m5.west) - (0.2cm,0)$) [anchor=east] {5.};

% Place legend anchored to the bottom-left of the instruction block
\node(ln) [below=0.3cm of m3.south west,anchor=west,sindy component,full opacity,fill=sindystandard,label=right:{: \small non-null cordinate/function data}] {};
\node(lp) [below=0.3cm of ln.south west,anchor=west,sindy component,full opacity,fill=sindypreknowledge,label=right:{: \small pre-knowledge}] {};
\node(le) [right=2.6cm of lp,sindy component,full opacity,fill=sindysolutionexplicit,label=right:{: \small explicit solution}] {};
\node(li) [right=2.8cm of le,sindy component,full opacity,fill=sindysolutionimplicit,label=right:{: \small implicit solution}] {};


\node (final) [below=1.2cm of m4,xshift=-1.4cm] {\normalsize Final solution : \ \tiny $S =$};

\matrix[matrix of nodes,
        column sep=3pt, 
        row sep=3pt,
        nodes={sindy solution},
        left delimiter={[},
        right delimiter={]},
        nodes in empty cells
        ] (sm6) [right=0.1cm of final] {
        |[fill=sindysolutionimplicit,full opacity]| & |[fill=sindypreknowledge, full opacity]| & |[fill=sindypreknowledge, full opacity]| & |[full opacity]| & |[fill=sindysolutionexplicit,full opacity]| & |[full opacity]| & |[full opacity]| & |[full opacity]| & |[fill=sindysolutionimplicit,full opacity]| \\
        };

\draw [->] (m1-2-2.north) to [bend left] (m1-2-4.north);
\draw [->] (m1-2-2.north) to [bend left] (m1-2-5.north);
\draw [->] (m1-3-3.south) to [bend right] (m1-3-5.south);

\draw [->] (m2a-2-4.west) to [bend left] (m2a-1-4.west);
\draw [->] (m2a-1-4.north) to [bend left] (m2a-1-9.north);
\draw [->] (m2a-1-4.north) to [bend right] (m2a-1-1.north);

\draw [->] (m2b-1-1.west) to [bend right] (m2b-4-1.west);
\draw [->] (m2b-1-9.east) to [bend left] (m2b-4-9.east);

\end{tikzpicture}
\end{document}